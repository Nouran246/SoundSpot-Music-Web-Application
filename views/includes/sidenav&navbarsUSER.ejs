<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Website Title</title>

    <!-- Include Crisp chat script -->
    <script type="text/javascript">
        window.$crisp=[];window.CRISP_WEBSITE_ID="60999265-70f0-4598-9d17-aee7a62b6da7";
        (function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;
        d.getElementsByTagName("head")[0].appendChild(s);})();
    </script>

    <!-- CSS for your sidebar and other styles -->
    <style>
        /* Add your CSS styles here */
        .texts {
            /* Define styles for the text area where recognized and replied text will appear */
        }
        .reply {
            /* Define styles for the reply text */
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <button onclick="changeLogo()" id="custom-sidebar-toggle"> 
            <img id="custom-sidebar-img" src="/photo/menu.png" class="dark-mode-img" alt="Button Image">
            <img id="custom-sidebar-img" src="/photo/menu (1).png" class="light-mode-img" alt="Button Image">
        </button>

        <a href="Userhomepage" id="trial">
            <img id="trial-img" src="/photo/output-onlinepngtools.png" alt="SoundSpot Logo">
        </a>

        <a class="text-a" href="Songs">
            <i class="fa-solid fa-music icons"></i>
            <span class="t">Songs</span>
        </a>

        <a class="text-a" href="ManagePlaylists">
            <i class="fa-solid fa-list"></i>
            <span class="t">Playlists</span>
        </a>

        <a class="text-a" href="Plans">
            <i class="fa-solid fa-wallet icons"></i>
            <span class="t">Plans</span>
        </a>

        <a class="text-a" href="recap">
            <i class="fa-solid fa-repeat"></i>
            <span class="t">Recap</span> 
        </a>

        <a class="text-a" href="history">
            <i class="fa-solid fa-clock-rotate-left"></i>
            <span class="t">History</span>
        </a>
        
        <a class="text-a" href="CommunityGuidelines">
            <i class="fa-regular fa-newspaper icons"></i>
            <span class="t">Community Guidelines</span>
        </a>

        <a class="text-a" href="contact">
            <i class="fas fa-phone dark-mode-img icons"></i>
            <span class="t">Contacts</span>
        </a>
    </div>

    <div class="navbar">
        <div class="search-bar" id="searchBar" style="display: none;">
            <input type="text" placeholder="Search...">
            <i class="fas fa-search search-icon"></i>
            <button id="mic-button" class="navbar-icons"> <i class="fa-solid fa-microphone"></i> </button>   
        </div>

        <div class="navbar-icons">
            <button id="search-button" class="search-button"> <i class="fa-solid fa-search"></i> </button>
            <div class="navbar-icons">
                <a href="/Game/land">
                    <button>
                        <i class="fa-solid fa-gamepad" id="game"></i>
                    </button>
                </a>
            </div>
            <div id="badges" class="navbar-icons">
                <i class="fa-solid fa-certificate"></i>
                <div class="badges-dropdown">
                    <nav>
                        <div class="menu-item">
                            <i class="fas fa-certificate" style="color:#0c907a;"></i>
                            <a href="$">Badge 1</a>
                        </div>
                        <div class="menu-item">
                            <i class="fas fa-trophy" style=" color: #ffcc00;"></i>
                            <a href="$">Badge 2</a>
                        </div>
                        <div class="menu-item">
                            <i class="fas fa-medal" style="color:#CD7F32;"></i>
                            <a href="&">Badge 3</a>
                        </div>
                    </nav>
                </div>
            </div> 
            <div id="profile">
                <img id="profile-icon" src="/photo/cat.jpg">
                <div class="profile_dropDownMenu">
                    <nav>
                        <div class="menu-item">
                            <i class="fa-solid fa-user"></i>
                            <a href="#">Profile</a>
                        </div>
                        <div class="menu-item">
                            <i class="fa-regular fa-eye"></i>
                            <a href="#">View as</a>
                        </div>
                        <div class="menu-item">
                            <i class="fa-solid fa-gear"></i>
                            <a href="#" id="settings-button">Settings</a>
                        </div>
                        <div class="menu-item">
                            <i class="fa-solid fa-flag"></i>
                            <a href="Report">Report</a>
                        </div>
                        <div class="menu-item">
                            <i class="fa-regular fa-sun"></i>
                            <a href="#">Light Mode</a>
                            <button id="toggle-light-mode"></button>
                        </div>
                        <div class="menu-item">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            <a href="/auth/logout">Log Out</a>
                        </div>
                    </nav>
                </div>
            </div>
            
            <div id="micModal" class="mod">
                <div class="mod-content">
                    <span id="closeButton" class="close">&times;</span>
                    <div id="micDetection">
                        <i id="micIcon" class="fa-solid fa-ear-listen"></i><br><br>
                        <h2 id="micIcon" style="font-size: 40px;">Listening..</h2>
                    </div>
                </div>
            </div>
            <div id="edit-window" class="modal">
                <div class="edit-content">
                    <h2 id="modalHeader">Edit Profile</h2>
                    <label>New Username:</label>
                    <input type="text" id="newUsername" placeholder="New Username"><br>
                    <label>New Profile Picture:</label>
                    <input type="file" id="newProfilePic" placeholder="New Profile Picture" accept="image/*"><br>
                    <label>Account Status:</label><br>
                    <input type="radio" id="activate" name="account-status" value="activate" name="accStat">
                    <label for="activate">Activate</label><br>
                    <input type="radio" id="deactivate" name="account-status" value="deactivate" name="accStat">
                    <label for="deactivate">Deactivate</label><br>
                    <label>Contact Admin:</label>
                    <input type="email" placeholder="example@gmail.com"><br>
                    <label>Website Language:<div id="google_translate_element"></div></label><br> 
                    <button type="submit">Save</button>
                    <button type="button" id="cancel-edit">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for voice recognition -->
    <script>
        const texts = document.querySelector('.texts');

        // Check if SpeechRecognition is available and use appropriate prefix
        window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        const recognition = new window.SpeechRecognition();
        recognition.interimResults = true;

        let p = document.createElement('p');

        recognition.addEventListener('result', (e) => {
            const text = Array.from(e.results)
                .map(result => result[0])
                .map(result => result.transcript)
                .join('');

            p.innerText = text;
            texts.appendChild(p);

            if (e.results[0].isFinal) {
                if (text.includes('I love you')) {
                    p = document.createElement('p');
                    p.classList.add('reply');
                    p.innerText = 'I love you too';
                    texts.appendChild(p);
                }
                if (text.includes('how are you')) {
                    p = document.createElement('p');
                    p.classList.add('reply');
                    p.innerText = "I'm good, how are you";
                    texts.appendChild(p);
                }

                p = document.createElement('p'); // Reset paragraph element
            }

            console.log(e);
        });

        recognition.addEventListener('end', () => {
            recognition.start(); // Restart recognition when it ends
        });

        recognition.start(); // Start speech recognition
    </script>
</body>
</html>
